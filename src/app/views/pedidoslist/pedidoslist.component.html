<div class="container">
<div class="card list-produto">
<h5 class="card-header-sm">

    <div class="form-group">
        <td><label for="date"><b> </b></label></td>
        <td><input style="margin-left: 50px; margin-top: 20px;" type="date" class="form-control-sm" id="date" [(ngModel)]="data" (change)="searchPedido()"></td>
        <td><button style="margin-left: 50px;" (click)="searchPedido()"class="btn btn btn-outline-success ml-2">Buscar</button></td>
    </div>
</h5>
    <div class="card-body">
        <div class="mat-elevation-z8">
        <div class="table-head">
        <table>

            <thead>
                <tr>
                    <th scope="col" style="width: 100px;">Id:</th>
                    <th scope="col" style="width: 200px;">Data:</th>
                    <th scope="col" style="width: 100px;">Valor:</th>
                    <th scope="col" style="width: 100px;">Status:</th>
                </tr>
            </thead>
        </table>
        </div>
        </div>
    <div class="mat-elevation-z8">
    <ngb-accordion #acc="ngbAccordion" activeIds="ngb-panel-0">

        <ngb-panel title="Simple" *ngFor="let Pedidos of allPedidos | async">
            <ng-template ngbPanelHeader>
                    <table>
                        <td style="padding-left: 180px;"> <button ngbPanelToggle class="btn btn btn-outline-primary ml-2">Expandir</button></td>
                        <td style="padding-left: auto;">{{Pedidos.idpedido}}</td>
                        <td>{{Pedidos.numero}}</td>
                        <td style="padding-left: 90px;">{{Pedidos.data_pedido |date:"hh-mm"}}</td>
                        <td style="padding-left: 75px;">{{Pedidos.valor_pedido|currency:'BRL'}}</td>
                        <td style="padding-left: 80px;">{{Pedidos.status}}</td>
                        <td><button (click)="checkNfc(Pedidos.idpedido)" class="btn btn btn-outline-success ml-2">Situação</button></td>
                        <td><button (click)="getPDF(Pedidos.pdf)" class="btn btn btn-outline-success ml-2">PDF</button></td>
                        <td><button (click)="getXML(Pedidos.xml)"class="btn btn btn-outline-success ml-2">XML</button></td>
                        <td><button (click)="cancelarNota(Pedidos.xmlCancelamento)"class="btn btn btn-outline-success ml-2">Cancelar</button></td>
                    </table>
            </ng-template>
            <ng-template ngbPanelContent>
                <tr><td>{{Pedidos.mensagem}}</td></tr>
            <tr><td>{{Pedidos.emissao}}</td></tr>
            <tr><td>{{Pedidos.protocolo}}</td></tr>
                <tr> <td>{{Pedidos.serie}}</td></tr>
                    <tr><td>{{Pedidos.chave}}</td></tr>
                        <tr> <td>{{Pedidos.dataAutorizacao}}</td></tr>
                            <tr><td>{{Pedidos.dataCancelamento}}</td></tr>
              <!--   <td><button (click)="searchProdutobyId(Pedidos.idpedido)" class="btn btn btn-outline-success ml-2">Produtos</button></td> --> 
              <ngb-accordion #acc="ngbAccordion" activeIds="ngb-panel-0">
                    <ngb-panel title="Simple">
                        <ng-template ngbPanelHeader class="table">
                            <button ngbPanelToggle (click)="searchProdutobyId(Pedidos.idpedido)" class="btn btn btn-outline-primary ml-2">Produtos</button>
                           </ng-template>
                           <ng-template ngbPanelContent class="table">

                               <table class="table">
                                   <thead>
                                       <tr>
                                           <th scope="col" style="width: 100px;">Id</th>
                                           <th scope="col" style="width: 100px;">Descrição</th>
                                           <th scope="col" style="width: 100px;">Preço</th>
                                           <th scope="col" style="width: 100px;">Desconto</th>
                                           <th scope="col" style="width: 100px;">Qtd</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let Produtos of  allProdutos | async">
                                            <td>{{Produtos.idproduto}}</td>
                                            <td>{{Produtos.descricao_produto}}</td>
                                            <td>{{Produtos.preco_item}}</td>
                                            <td>{{Produtos.preco_desconto_item}}</td>
                                            <td>{{Produtos.quantidade_item}}</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </ng-template>
                    </ngb-panel>
                </ngb-accordion>
       
                
            </ng-template>
        </ngb-panel>

    </ngb-accordion>
    </div>
    </div>
    </div>